-------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/al8xi8/Desktop/HW1 Alexandra Chang.do.log
  log type:  text
 opened on:  15 Jan 2024, 23:39:21

. do "/Users/al8xi8/Desktop/HW1 Alexandra Chang.do"

. * PBHS31001 Epidemiologic Methods HW1 
. * Date: 1/15/2024 
. * By: Alexandra Chang 
. *==============================================================================*
. 
. *******************************Data Exploration*********************************
. 
. *List the data so you can see what they look like and how they are organized
. 
. //There are seven lines of data â€“ one for each age group.
. //There are 11 variables in each line of data.
. //One age group has 5 periods and 5 denominators.
. 
. list

     +--------------------------------------------------------------------------------------+
  1. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 20-9 |       1 |       3 |       4 |       6 |       7 | 1537781 | 1380360 | 1555934 |
     |--------------------------------------------------------------------------------------|
     |                    den4                  |                     den5                  |
     |                 2322128                  |                  2769374                  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  2. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 30-9 |      10 |      20 |      28 |      31 |      40 | 1406807 | 1615355 | 1632000 |
     |--------------------------------------------------------------------------------------|
     |                    den4                  |                     den5                  |
     |                 1863489                  |                  2343684                  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  3. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 40-9 |      70 |     115 |     195 |     289 |     281 | 1258708 | 1493910 | 1800315 |
     |--------------------------------------------------------------------------------------|
     |                    den4                  |                     den5                  |
     |                 1727315                  |                  1800233                  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  4. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 50-9 |     247 |     543 |     885 |    1300 |    1418 | 1143763 | 1232189 | 1514848 |
     |--------------------------------------------------------------------------------------|
     |                    den4                  |                     den5                  |
     |                 1789483                  |                  1660060                  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  5. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 60-9 |     395 |    1057 |    1992 |    2780 |    3769 |  770224 |  980496 | 1095932 |
     |--------------------------------------------------------------------------------------|
     |                    den4                  |                     den5                  |
     |                 1336181                  |                  1561113                  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  6. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 70-9 |     209 |     790 |    2001 |    3017 |    4354 |  437017 |  567892 |  723242 |
     |--------------------------------------------------------------------------------------|
     |                    den4                  |                     den5                  |
     |                  756609                  |                   941025                  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  7. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 80-9 |      60 |     231 |     673 |    1453 |    2270 |  145147 |  207148 |  273417 |
     |--------------------------------------------------------------------------------------|
     |                    den4                  |                     den5                  |
     |                  345493                  |                   389562                  |
     +--------------------------------------------------------------------------------------+

. 
. *********************Creating/Modifying variables(columns)**********************
. 
. *Calculate incidence rates for each time period within each age group
. 
. //Use the corresponding numerator and denominator variables.
. generate Inc1 = period1/den1

. generate Inc2 = period2/den2

. generate Inc3 = period3/den3

. generate Inc4 = period4/den4

. generate Inc5 = period5/den5

. 
. //Now have 16 variables on each line of data. 
. list

     +--------------------------------------------------------------------------------------+
  1. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 20-9 |       1 |       3 |       4 |       6 |       7 | 1537781 | 1380360 | 1555934 |
     |--------------------------------------------------------------------------------------|
     |    den4  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     | 2322128  | 2769374  |  6.50e-07  |  2.17e-06  |  2.57e-06  |  2.58e-06  |  2.53e-06  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  2. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 30-9 |      10 |      20 |      28 |      31 |      40 | 1406807 | 1615355 | 1632000 |
     |--------------------------------------------------------------------------------------|
     |    den4  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     | 1863489  | 2343684  |  7.11e-06  |  .0000124  |  .0000172  |  .0000166  |  .0000171  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  3. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 40-9 |      70 |     115 |     195 |     289 |     281 | 1258708 | 1493910 | 1800315 |
     |--------------------------------------------------------------------------------------|
     |    den4  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     | 1727315  | 1800233  |  .0000556  |   .000077  |  .0001083  |  .0001673  |  .0001561  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  4. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 50-9 |     247 |     543 |     885 |    1300 |    1418 | 1143763 | 1232189 | 1514848 |
     |--------------------------------------------------------------------------------------|
     |    den4  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     | 1789483  | 1660060  |   .000216  |  .0004407  |  .0005842  |  .0007265  |  .0008542  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  5. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 60-9 |     395 |    1057 |    1992 |    2780 |    3769 |  770224 |  980496 | 1095932 |
     |--------------------------------------------------------------------------------------|
     |    den4  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     | 1336181  | 1561113  |  .0005128  |   .001078  |  .0018176  |  .0020806  |  .0024143  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  6. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 70-9 |     209 |     790 |    2001 |    3017 |    4354 |  437017 |  567892 |  723242 |
     |--------------------------------------------------------------------------------------|
     |    den4  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     |  756609  |  941025  |  .0004782  |  .0013911  |  .0027667  |  .0039875  |  .0046269  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  7. |  age | period1 | period2 | period3 | period4 | period5 |    den1 |    den2 |    den3 |
     | 80-9 |      60 |     231 |     673 |    1453 |    2270 |  145147 |  207148 |  273417 |
     |--------------------------------------------------------------------------------------|
     |    den4  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     |  345493  |  389562  |  .0004134  |  .0011151  |  .0024614  |  .0042056  |  .0058271  |
     +--------------------------------------------------------------------------------------+

. 
. label variable period1 "1935-1944"

. 
. label variable period2 "1945-1954"

. 
. label variable period3 "1955-1964"

. 
. label variable period4 "1965-1974"

. 
. label variable period5 "1975-1984"

. 
. label variable Inc1 "Incidence rate 1935-1944"

. 
. label variable Inc2 "Incidence rate 1945-1954"

. 
. label variable Inc3 "Incidence rate 1955-1964"

. 
. label variable Inc4 "Incidence rate 1965-1974"

. 
. label variable Inc5 "Incidence rate 1975-1984"

. 
. ***********************************Reshape**************************************
. 
. *Arrange dataset in long format
. 
. //Long format data: only one numerator and denominator on each line.
. reshape long period den, i(age) j(decade)
(j = 1 2 3 4 5)

Data                               Wide   ->   Long
-----------------------------------------------------------------------------
Number of observations                7   ->   35          
Number of variables                  16   ->   9           
j variable (5 values)                     ->   decade
xij variables:
            period1 period2 ... period5   ->   period
                     den1 den2 ... den5   ->   den
-----------------------------------------------------------------------------

. 
. //Each of the current lines of data would turn into five lines
. //Each with FOUR variables: age group, time period, numerator, denominator.
. list

     +-----------------------------------------------------------------------------------------+
     |  age   decade   period       den       Inc1       Inc2       Inc3       Inc4       Inc5 |
     |-----------------------------------------------------------------------------------------|
  1. | 20-9        1        1   1537781   6.50e-07   2.17e-06   2.57e-06   2.58e-06   2.53e-06 |
  2. | 20-9        2        3   1380360   6.50e-07   2.17e-06   2.57e-06   2.58e-06   2.53e-06 |
  3. | 20-9        3        4   1555934   6.50e-07   2.17e-06   2.57e-06   2.58e-06   2.53e-06 |
  4. | 20-9        4        6   2322128   6.50e-07   2.17e-06   2.57e-06   2.58e-06   2.53e-06 |
  5. | 20-9        5        7   2769374   6.50e-07   2.17e-06   2.57e-06   2.58e-06   2.53e-06 |
     |-----------------------------------------------------------------------------------------|
  6. | 30-9        1       10   1406807   7.11e-06   .0000124   .0000172   .0000166   .0000171 |
  7. | 30-9        2       20   1615355   7.11e-06   .0000124   .0000172   .0000166   .0000171 |
  8. | 30-9        3       28   1632000   7.11e-06   .0000124   .0000172   .0000166   .0000171 |
  9. | 30-9        4       31   1863489   7.11e-06   .0000124   .0000172   .0000166   .0000171 |
 10. | 30-9        5       40   2343684   7.11e-06   .0000124   .0000172   .0000166   .0000171 |
     |-----------------------------------------------------------------------------------------|
 11. | 40-9        1       70   1258708   .0000556    .000077   .0001083   .0001673   .0001561 |
 12. | 40-9        2      115   1493910   .0000556    .000077   .0001083   .0001673   .0001561 |
 13. | 40-9        3      195   1800315   .0000556    .000077   .0001083   .0001673   .0001561 |
 14. | 40-9        4      289   1727315   .0000556    .000077   .0001083   .0001673   .0001561 |
 15. | 40-9        5      281   1800233   .0000556    .000077   .0001083   .0001673   .0001561 |
     |-----------------------------------------------------------------------------------------|
 16. | 50-9        1      247   1143763    .000216   .0004407   .0005842   .0007265   .0008542 |
 17. | 50-9        2      543   1232189    .000216   .0004407   .0005842   .0007265   .0008542 |
 18. | 50-9        3      885   1514848    .000216   .0004407   .0005842   .0007265   .0008542 |
 19. | 50-9        4     1300   1789483    .000216   .0004407   .0005842   .0007265   .0008542 |
 20. | 50-9        5     1418   1660060    .000216   .0004407   .0005842   .0007265   .0008542 |
     |-----------------------------------------------------------------------------------------|
 21. | 60-9        1      395    770224   .0005128    .001078   .0018176   .0020806   .0024143 |
 22. | 60-9        2     1057    980496   .0005128    .001078   .0018176   .0020806   .0024143 |
 23. | 60-9        3     1992   1095932   .0005128    .001078   .0018176   .0020806   .0024143 |
 24. | 60-9        4     2780   1336181   .0005128    .001078   .0018176   .0020806   .0024143 |
 25. | 60-9        5     3769   1561113   .0005128    .001078   .0018176   .0020806   .0024143 |
     |-----------------------------------------------------------------------------------------|
 26. | 70-9        1      209    437017   .0004782   .0013911   .0027667   .0039875   .0046269 |
 27. | 70-9        2      790    567892   .0004782   .0013911   .0027667   .0039875   .0046269 |
 28. | 70-9        3     2001    723242   .0004782   .0013911   .0027667   .0039875   .0046269 |
 29. | 70-9        4     3017    756609   .0004782   .0013911   .0027667   .0039875   .0046269 |
 30. | 70-9        5     4354    941025   .0004782   .0013911   .0027667   .0039875   .0046269 |
     |-----------------------------------------------------------------------------------------|
 31. | 80-9        1       60    145147   .0004134   .0011151   .0024614   .0042056   .0058271 |
 32. | 80-9        2      231    207148   .0004134   .0011151   .0024614   .0042056   .0058271 |
 33. | 80-9        3      673    273417   .0004134   .0011151   .0024614   .0042056   .0058271 |
 34. | 80-9        4     1453    345493   .0004134   .0011151   .0024614   .0042056   .0058271 |
 35. | 80-9        5     2270    389562   .0004134   .0011151   .0024614   .0042056   .0058271 |
     +-----------------------------------------------------------------------------------------+

. 
. *Arrage dataset in wide format
. 
. //Wide format data: repeated observations at different times for each subject.
. reshape wide period den, i(age) j(decade)
(j = 1 2 3 4 5)

Data                               Long   ->   Wide
-----------------------------------------------------------------------------
Number of observations               35   ->   7           
Number of variables                   9   ->   16          
j variable (5 values)            decade   ->   (dropped)
xij variables:
                                 period   ->   period1 period2 ... period5
                                    den   ->   den1 den2 ... den5
-----------------------------------------------------------------------------

. list

     +--------------------------------------------------------------------------------------+
  1. |  age | period1 |    den1 | period2 |    den2 | period3 |    den3 | period4 |    den4 |
     | 20-9 |       1 | 1537781 |       3 | 1380360 |       4 | 1555934 |       6 | 2322128 |
     |--------------------------------------------------------------------------------------|
     | period5  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     |       7  | 2769374  |  6.50e-07  |  2.17e-06  |  2.57e-06  |  2.58e-06  |  2.53e-06  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  2. |  age | period1 |    den1 | period2 |    den2 | period3 |    den3 | period4 |    den4 |
     | 30-9 |      10 | 1406807 |      20 | 1615355 |      28 | 1632000 |      31 | 1863489 |
     |--------------------------------------------------------------------------------------|
     | period5  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     |      40  | 2343684  |  7.11e-06  |  .0000124  |  .0000172  |  .0000166  |  .0000171  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  3. |  age | period1 |    den1 | period2 |    den2 | period3 |    den3 | period4 |    den4 |
     | 40-9 |      70 | 1258708 |     115 | 1493910 |     195 | 1800315 |     289 | 1727315 |
     |--------------------------------------------------------------------------------------|
     | period5  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     |     281  | 1800233  |  .0000556  |   .000077  |  .0001083  |  .0001673  |  .0001561  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  4. |  age | period1 |    den1 | period2 |    den2 | period3 |    den3 | period4 |    den4 |
     | 50-9 |     247 | 1143763 |     543 | 1232189 |     885 | 1514848 |    1300 | 1789483 |
     |--------------------------------------------------------------------------------------|
     | period5  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     |    1418  | 1660060  |   .000216  |  .0004407  |  .0005842  |  .0007265  |  .0008542  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  5. |  age | period1 |    den1 | period2 |    den2 | period3 |    den3 | period4 |    den4 |
     | 60-9 |     395 |  770224 |    1057 |  980496 |    1992 | 1095932 |    2780 | 1336181 |
     |--------------------------------------------------------------------------------------|
     | period5  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     |    3769  | 1561113  |  .0005128  |   .001078  |  .0018176  |  .0020806  |  .0024143  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  6. |  age | period1 |    den1 | period2 |    den2 | period3 |    den3 | period4 |    den4 |
     | 70-9 |     209 |  437017 |     790 |  567892 |    2001 |  723242 |    3017 |  756609 |
     |--------------------------------------------------------------------------------------|
     | period5  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     |    4354  |  941025  |  .0004782  |  .0013911  |  .0027667  |  .0039875  |  .0046269  |
     +--------------------------------------------------------------------------------------+

     +--------------------------------------------------------------------------------------+
  7. |  age | period1 |    den1 | period2 |    den2 | period3 |    den3 | period4 |    den4 |
     | 80-9 |      60 |  145147 |     231 |  207148 |     673 |  273417 |    1453 |  345493 |
     |--------------------------------------------------------------------------------------|
     | period5  |    den5  |      Inc1  |      Inc2  |      Inc3  |      Inc4  |      Inc5  |
     |    2270  |  389562  |  .0004134  |  .0011151  |  .0024614  |  .0042056  |  .0058271  |
     +--------------------------------------------------------------------------------------+

. 
. *********************************Analyze****************************************
. 
. *Age Effect
. //Analyzed by comparing (incidence rates) within different age groups at a particular point in 
> time.
. 
. *Birth Cohort Effect Graph
. //Analyzed by tracking (incidence rates) changes within a specific cohort as they age.
. 
. list age Inc1 Inc2 Inc3 Inc4 Inc5, sep (7)

     +-------------------------------------------------------------+
     |  age       Inc1       Inc2       Inc3       Inc4       Inc5 |
     |-------------------------------------------------------------|
  1. | 20-9   6.50e-07   2.17e-06   2.57e-06   2.58e-06   2.53e-06 |
  2. | 30-9   7.11e-06   .0000124   .0000172   .0000166   .0000171 |
  3. | 40-9   .0000556    .000077   .0001083   .0001673   .0001561 |
  4. | 50-9    .000216   .0004407   .0005842   .0007265   .0008542 |
  5. | 60-9   .0005128    .001078   .0018176   .0020806   .0024143 |
  6. | 70-9   .0004782   .0013911   .0027667   .0039875   .0046269 |
  7. | 80-9   .0004134   .0011151   .0024614   .0042056   .0058271 |
     +-------------------------------------------------------------+

. 
. 
. 
. 
end of do-file

